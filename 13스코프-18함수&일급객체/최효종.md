# 스코프

## 함수스코프와 블록스코프

- 함수 내부에서 선언된 변수는 함수 외부에서 참조할 수 없고, 함수 안에서만 유효합니다.
- var 키워드는 함수 스코프를 따르며, 함수 내부에서만 유효합니다. 반면, let과 const는 블록 스코프를 따르며, 코드 블록 내에서만 유효합니다.

## 변수의 중복 선언

- var 키워드는 같은 스코프 내에서 중복 선언이 가능하지만, let과 const는 중복 선언을 허용하지 않습니다.

## 식별자 결정

- 자바스크립트는 스코프 체인을 통해 변수를 찾으며, 동일한 이름의 변수가 여러 개 있을 경우, 가장 가까운 스코프의 변수를 참조합니다.
- 변수는 자신이 선언된 위치에 따라 전역 스코프(global scope)와 지역 스코프(local scope)로 나뉩니다.

## 변수 충돌 방지

- 각 스코프는 독립적인 네임스페이스 역할을 하여 변수 이름의 충돌을 방지합니다. 같은 이름의 변수를 다른 스코프에서 선언해도 각각 독립적으로 작동합니다.

## 전역 스코프와 지역 스코프

전역 스코프:

- 전역 스코프는 코드의 가장 바깥 영역에서 변수가 선언될 때 적용됩니다.
- 전역 스코프에 선언된 변수는 어디서든 접근할 수 있습니다.

지역 스코프:

- 지역 스코프는 함수 내부에서 변수를 선언할 때 발생합니다.
- 지역 변수는 해당 함수와 그 내부에서만 유효하며, 외부에서 접근할 수 없습니다.

## 스코프 체인

### 스코프 체인이란?

- 함수는 전역에서 정의되거나 다른 함수 내부에서 정의될 수 있습니다. 이러한 경우 함수는 중첩될 수 있으며, 이를 함수의 중첩이라고 합니다.
- 함수 내부에서 변수가 선언될 때, 해당 함수 내부의 스코프뿐만 아니라 외부 함수의 스코프도 참조할 수 있습니다. 이러한 구조를 스코프 체인이라고 합니다.

### 계층적 구조

- 스코프 체인은 함수가 중첩될수록 계층적 구조를 형성합니다. 하위 함수는 상위 함수의 변수를 참조할 수 있지만, 반대로 상위 함수는 하위 함수의 변수를 참조할 수 없습니다.
- 예를 들어, outer 함수 내부에 inner 함수가 있는 경우, inner 함수는 outer 함수의 변수에 접근할 수 있습니다. 그러나 반대로 outer 함수는 inner 함수의 변수에 접근할 수 없습니다.

### 변수 검색 과정

- 자바스크립트 엔진은 변수를 찾을 때, 스코프 체인을 따라 변수를 검색합니다. 즉, 현재 함수의 스코프에서 변수를 찾고, 없으면 상위 스코프로 이동하며 변수를 찾습니다.
- 이 과정은 마치 상속처럼 작동하며, 하위 스코프에서 상위 스코프의 변수를 사용할 수 있지만, 상위 스코프는 하위 스코프의 변수를 사용할 수 없습니다.

### 스코프 체인과 함수 검색

함수 역시 변수처럼 스코프 체인을 통해 검색됩니다. 예를 들어, 함수 bar 내부에서 함수 foo를 호출할 때, 먼저 지역 스코프에서 foo를 찾고, 없으면 전역 스코프에서 foo를 찾습니다.

## 함수레벨 스코프

- 자바스크립트의 var 키워드는 함수 레벨 스코프를 따릅니다. 즉, 함수 내에서 선언된 변수는 해당 함수 내에서만 유효하며, 함수 외부에서는 접근할 수 없습니다.
- 그러나 if, for와 같은 코드 블록 내에서 var로 변수를 선언해도 이 변수는 코드 블록이 아닌 함수 전체에서 유효합니다.

## 블록 레벨 스코프

반면, let과 const 키워드는 블록 레벨 스코프를 지원합니다. 이는 코드 블록(if, for 등) 내부에서 선언된 변수가 그 블록 내에서만 유효하다는 뜻입니다.
이 특성은 코드의 안전성을 높이며, 중복 변수 선언으로 인한 오류를 방지합니다.

## 렉시컬 스코프

### 렉시컬 스코프란?

- 자바스크립트에서 함수가 호출된 위치가 아닌 함수가 정의된 위치에 따라 상위 스코프가 결정됩니다. 즉, 함수가 실행되는 시점에 상위 스코프를 결정하지 않고, 함수가 작성된 시점에 이미 스코프가 결정됩니다.
- 이는 자바스크립트가 동적 스코프가 아닌 정적 스코프(정적 범위)를 따른다는 것을 의미합니다.

### 렉시컬 스코프의 중요성

- 함수는 정의된 시점의 스코프 체인을 기억하고 있기 때문에, 호출 위치와 관계없이 언제나 정의된 위치에서의 스코프를 사용합니다.
- 이는 자바스크립트 엔진이 변수를 검색할 때 함수가 작성된 위치에 따라 상위 스코프를 고정하는 방식으로 작동하기 때문입니다.
